{
    "version": 3,
    "sources": [
        "../../../src/api/controller/index.js"
    ],
    "names": [
        "Base",
        "require",
        "moment",
        "Jushuitan",
        "rp",
        "http",
        "module",
        "exports",
        "indexAction",
        "appInfoAction",
        "currentTime",
        "parseInt",
        "Date",
        "getTime",
        "banner",
        "model",
        "where",
        "enabled",
        "is_delete",
        "order",
        "select",
        "notice",
        "channel",
        "is_channel",
        "parent_id",
        "sort_order",
        "categoryList",
        "is_show",
        "newCategoryList",
        "categoryItem",
        "categoryGoods",
        "category_id",
        "id",
        "goods_number",
        "is_on_sale",
        "is_index",
        "push",
        "name",
        "goodsList",
        "img_url",
        "height",
        "p_height",
        "success"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;AACA;AACA,MAAMC,SAASD,QAAQ,QAAR,CAAf;AACA,MAAME,YAAYF,QAAQ,WAAR,CAAlB;AACA,MAAMG,KAAKH,QAAQ,iBAAR,CAAX;AACA,MAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACAK,OAAOC,OAAP,GAAiB,cAAcP,IAAd,CAAmB;AAC1BQ,eAAN,GAAoB;AAChB;AACA;;AAFgB;AAGnB;AACKC,iBAAN,GAAsB;AAAA;;AAAA;AAClB;AACA,gBAAIC,cAAcC,SAAS,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAAhC,CAAlB;AACA,kBAAMC,SAAS,MAAM,MAAKC,KAAL,CAAW,IAAX,EAAiBC,KAAjB,CAAuB;AACxCC,yBAAS,CAD+B;AAExCC,2BAAW;AAF6B,aAAvB,EAGlBC,KAHkB,CAGZ,gBAHY,EAGMC,MAHN,EAArB;AAIA,kBAAMC,SAAS,MAAM,MAAKN,KAAL,CAAW,QAAX,EAAqBC,KAArB,CAA2B;AAC5CE,2BAAW;AADiC,aAA3B,EAElBE,MAFkB,EAArB;AAGA,kBAAME,UAAU,MAAM,MAAKP,KAAL,CAAW,UAAX,EAAuBC,KAAvB,CAA6B;AAC/CO,4BAAY,CADmC;AAE/CC,2BAAW;AAFoC,aAA7B,EAGnBL,KAHmB,CAGb;AACLM,4BAAY;AADP,aAHa,EAKnBL,MALmB,EAAtB;AAMA,kBAAMM,eAAe,MAAM,MAAKX,KAAL,CAAW,UAAX,EAAuBC,KAAvB,CAA6B;AACpDQ,2BAAW,CADyC;AAEpDG,yBAAS;AAF2C,aAA7B,EAGxBR,KAHwB,CAGlB;AACLM,4BAAY;AADP,aAHkB,EAKxBL,MALwB,EAA3B;AAMA,kBAAMQ,kBAAkB,EAAxB;AACA,iBAAK,MAAMC,YAAX,IAA2BH,YAA3B,EAAyC;AACrC,sBAAMI,gBAAgB,MAAM,MAAKf,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B;AAClDe,iCAAaF,aAAaG,EADwB;AAElDC,kCAAc,CAAC,IAAD,EAAO,CAAP,CAFoC;AAGlDC,gCAAY,CAHsC;AAIlDC,8BAAU,CAJwC;AAKlDjB,+BAAW;AALuC,iBAA1B,EAMzBC,KANyB,CAMnB;AACLM,gCAAY;AADP,iBANmB,EAQzBL,MARyB,EAA5B;AASAQ,gCAAgBQ,IAAhB,CAAqB;AACjBJ,wBAAIH,aAAaG,EADA;AAEjBK,0BAAMR,aAAaQ,IAFF;AAGjBC,+BAAWR,aAHM;AAIjBhB,4BAAQe,aAAaU,OAJJ;AAKjBC,4BAAQX,aAAaY;AALJ,iBAArB;AAOH;AACD,mBAAO,MAAKC,OAAL,CAAa;AAChBpB,yBAASA,OADO;AAEhBR,wBAAQA,MAFQ;AAGhBO,wBAAQA,MAHQ;AAIhBK,8BAAcE;AAJE,aAAb,CAAP;AAzCkB;AA+CrB;AApD+B,CAApC",
    "file": "../../../src/api/controller/index.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n// const view = require('think-view');\nconst moment = require('moment');\nconst Jushuitan = require('jushuitan');\nconst rp = require('request-promise');\nconst http = require(\"http\");\nmodule.exports = class extends Base {\n    async indexAction() {\n        //auto render template file index_index.html\n        // return this.display();\n    }\n    async appInfoAction() {\n        // async indexAction() {\n        let currentTime = parseInt(new Date().getTime() / 1000);\n        const banner = await this.model('ad').where({\n            enabled: 1,\n            is_delete: 0\n        }).order('sort_order asc').select();\n        const notice = await this.model('notice').where({\n            is_delete: 0\n        }).select();\n        const channel = await this.model('category').where({\n            is_channel: 1,\n            parent_id: 0,\n        }).order({\n            sort_order: 'asc'\n        }).select();\n        const categoryList = await this.model('category').where({\n            parent_id: 0,\n            is_show: 1\n        }).order({\n            sort_order: 'asc'\n        }).select();\n        const newCategoryList = [];\n        for (const categoryItem of categoryList) {\n            const categoryGoods = await this.model('goods').where({\n                category_id: categoryItem.id,\n                goods_number: ['>=', 0],\n                is_on_sale: 1,\n                is_index: 1,\n                is_delete: 0\n            }).order({\n                sort_order: 'asc'\n            }).select();\n            newCategoryList.push({\n                id: categoryItem.id,\n                name: categoryItem.name,\n                goodsList: categoryGoods,\n                banner: categoryItem.img_url,\n                height: categoryItem.p_height\n            });\n        }\n        return this.success({\n            channel: channel,\n            banner: banner,\n            notice: notice,\n            categoryList: newCategoryList,\n        });\n    }\n};"
    ]
}